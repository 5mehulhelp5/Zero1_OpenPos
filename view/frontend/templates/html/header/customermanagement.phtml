<?php 
use Hyva\Theme\ViewModel\HeroiconsSolid;
use Hyva\Theme\ViewModel\HeroiconsOutline;
/** @var HeroiconsSolid $heroicons */
$heroiconsSolid = $viewModels->require(HeroiconsSolid::class);
$heroiconsOutline = $viewModels->require(HeroiconsOutline::class);
?>

<div id="openpos-customermanagement" class="my-4 mx-6 px-1">
    <!-- <div class="customer customer flex items-center w-full" x-data="{ showLoginForm: false }"> -->
    <div class="customer customer" x-data="{ showLoginForm: false }">
        
        <?php if($magewire->isCurrentCustomerGuest()): ?>

            <div class="flex items-center w-full">
                <span class="mr-2">
                    <?= $heroiconsOutline->userHtml('', 30, 30, ['aria-hidden' => 'true']); ?>
                </span>
                <span class="text-lg font-bold"><?php echo __('Guest'); ?></span>
                <span class="ml-auto underline" x-on:click="showLoginForm = ! showLoginForm"><?php echo __('Login as customer'); ?></span>
            </div>

            <div id="loginform" class="mt-4" x-show="showLoginForm">
                <input type="email" class="mb-4 w-full p-2 text-sm leading-normal transition appearance-none text-grey-800 font-normal outline-none lg:text-lg border px-4 form-input" placeholder="Enter customer's email address" wire:model.debounce.2000ms="emailInput" />
                <?php if($magewire->foundCustomer !== null): ?>
                    <button class="secondary-login btn btn-primary action login primary w-full text-center uppercase justify-center" wire:click="changeToCustomer">Switch to <?= $magewire->foundCustomer ?></button>
                <?php else: ?>
                    <button class="secondary-login btn btn-primary action login primary w-full text-center uppercase justify-center" wire:click="changeToCustomer">Switch</button>
                <?php endif; ?>
            </div>
        <?php else: ?>
            <div class="flex items-center w-full">
                <span class="mr-2">
                    <?= $heroiconsSolid->userHtml('', 30, 30, ['aria-hidden' => 'true']); ?>
                </span>
                <span class="text-lg font-bold"><?php echo __($magewire->getCurrentCustomerName() ?? 'Unknown customer'); ?></span>
                <span class="ml-auto underline" wire:click="changeToGuest"><?php echo __('Guest mode'); ?></span>
            </div>
        <?php endif; ?>
    </div>
</div>

<style>
.secondary-login {
    background: #fff;
    color: #000;
    border: 1px solid #000;
    height: 50px !important;
    border-radius: 4px !important;
}
.secondary-login:hover {
    background: #fff;
    color: #000;
}
</style>